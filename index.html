<!DOCTYPE html>
<html lang="lv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ItƒÅlijas dialekti</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background:#f5f5f5;
}

/* ===== HEADER ===== */
header {
    background: #4b8bbe;
    color: white;
    text-align: center;
    padding: 20px;
    position: relative;
}
h1 { margin: 0; }

#dialectsBtn {
    position: absolute;
    right: 20px;
    top: 20px;
    padding: 10px 15px;
    background:#fff;
    color:#4b8bbe;
    border:none;
    border-radius:5px;
    cursor:pointer;
    font-weight:bold;
    transition:0.3s;
}
#dialectsBtn:hover { background:#e0e0e0; }

/* ===== MAP ===== */
#map {
    height: 80vh;
    width: 95%;
    margin: 20px auto;
    border-radius:10px;
    box-shadow:0 0 15px rgba(0,0,0,0.2);
}

/* ===== SIDE PANEL ===== */
#sidePanel {
    position: fixed;
    top: 0;
    right: -400px;
    width: 350px;
    height: 100%;
    background: white;
    box-shadow: -5px 0 15px rgba(0,0,0,0.3);
    padding: 20px;
    transition: 0.4s ease;
    overflow-y: auto;
    z-index: 999;
}
#sidePanel.show { right: 0; }

#sidePanel h2 { margin-top: 0; }

#closePanel {
    background:#4b8bbe;
    color:white;
    border:none;
    border-radius:5px;
    padding:10px;
    cursor:pointer;
    width:100%;
    margin-top:10px;
}

/* ===== POPUP ===== */
.custom-popup {
    font-size: 14px;
    line-height: 1.3;
}
.custom-popup h3 {
    margin: 0 0 5px;
    color: #4b8bbe;
}

/* ===== FOOTER ===== */
footer {
    text-align: center;
    padding: 15px;
    background: #222;
    color: #eee;
    font-size: 0.9em;
}

/* ===== MOBILE ADAPTATION ===== */
@media screen and (max-width: 768px) {
    #map { height: 60vh; width: 95%; margin: 15px auto; }
    #sidePanel { width: 100%; }
    #dialectsBtn { padding: 8px 12px; font-size: 14px; }
}
</style>
</head>

<body>

<header>
<h1>ItƒÅlijas dialekti</h1>
<button id="dialectsBtn">Dialekti & Info</button>
</header>

<div id="map"></div>

<footer>
Dati no: <a href="sources.html" style="color:#4b8bbe;">ISTAT & lingvistikas pƒìtƒ´jumi</a> | Autors: XsaTi
</footer>

<!-- ===== SIDE PANEL ===== -->
<div id="sidePanel">
<h2>Dialekti un informƒÅcija</h2>
<ul id="dialectList"></ul>
<button id="closePanel">Aizvƒìrt</button>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
// ===== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ö–ê–†–¢–´ =====
const map = L.map("map").setView([42.5, 12.5], 5);
L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", { attribution: "¬© OpenStreetMap" }).addTo(map);

// ===== –î–ê–ù–ù–´–ï –†–ï–ì–ò–û–ù–û–í =====
const regions = {
    "Piemonte": { pop:"4.3 milj.", dialectUsers:"‚âà2.1 milj.", dialect:"Pjemontes dialekts", info:"Rietumu retoromƒÅ≈Üu dialekts ar franƒçu ietekmi." },
    "Lombardia": { pop:"10 milj.", dialectUsers:"‚âà3.2 milj.", dialect:"Lombardes dialekts", info:"Cƒìlies no Gallo-Italie≈°u grupas, pla≈°i lietots MilƒÅnƒÅ." },
    "Veneto": { pop:"4.9 milj.", dialectUsers:"‚âà3.6 milj.", dialect:"Venetie≈°u dialekts", info:"ƒªoti izplatƒ´ts, at≈°ƒ∑irƒ´gs no Gallo-Italie≈°u valodƒÅm." },
    "Toscana": { pop:"3.7 milj.", dialectUsers:"‚âà2.1 milj.", dialect:"ToskƒÅnas dialekts", info:"Pamats modernajai itƒÅƒºu valodai." },
    "Lazio": { pop:"5.9 milj.", dialectUsers:"‚âà2.3 milj.", dialect:"Romas dialekts", info:"CentrƒÅlƒÅs ItƒÅlijas dialekts ar sena romie≈°u valodas ietekmi." },
    "Campania": { pop:"5.8 milj.", dialectUsers:"‚âà4 milj.", dialect:"Neapoles dialekts", info:"Dienvidos populƒÅrƒÅkais dialekts, at≈°ƒ∑iras fonƒìtikƒÅ." },
    "Sicilia": { pop:"5 milj.", dialectUsers:"‚âà3.5 milj.", dialect:"Sicƒ´lie≈°u dialekts", info:"Spƒìcƒ´gas senƒÅs grieƒ∑u un arƒÅbu saknes." },
    "Sardegna": { pop:"1.6 milj.", dialectUsers:"‚âà1 milj.", dialect:"Sardu valoda", info:"ƒªoti sena romƒÅ≈Üu valoda ‚Äî tuvƒÅka latƒ´≈Üu nekƒÅ itƒÅƒºu." },
    "Friuli-Venezia Giulia": { pop:"1.2 milj.", dialectUsers:"‚âà0.8 milj.", dialect:"FurlƒÅ≈Üu dialekts", info:"Ziemeƒºaustrumu dialekts ar slovƒì≈Üu ietekmi." },
    "Valle d'Aosta": { pop:"0.13 milj.", dialectUsers:"‚âà0.08 milj.", dialect:"ValdostƒÅ dialekts", info:"Franƒçu un arpitƒÅ≈Üu ietekme." },
    "Trentino-Alto Adige": { pop:"1.1 milj.", dialectUsers:"‚âà0.5 milj.", dialect:"Tiroƒºu dialekts", info:"VƒÅcu un ladƒ´≈Üu ietekme." },
    "Liguria": { pop:"1.5 milj.", dialectUsers:"‚âà0.9 milj.", dialect:"Lig≈´rijas dialekts", info:"Piekrastes dialekts ar franƒçu ietekmi." },
    "Emilia-Romagna": { pop:"4.5 milj.", dialectUsers:"‚âà2.8 milj.", dialect:"Emƒ´lijas dialekts", info:"Makaronu dzimtene üòé." },
    "Marche": { pop:"1.5 milj.", dialectUsers:"‚âà1 milj.", dialect:"Markes dialekts", info:"Adrijas j≈´ras piekraste." },
    "Umbria": { pop:"0.9 milj.", dialectUsers:"‚âà0.5 milj.", dialect:"Umbrijas dialekts", info:"Vidus ItƒÅlija, lƒ´dzƒ´gs ToskƒÅnai." },
    "Abruzzo": { pop:"1.3 milj.", dialectUsers:"‚âà0.8 milj.", dialect:"Abrucu dialekts", info:"Kalnains reƒ£ions ar tradicionƒÅliem dialektiem." },
    "Molise": { pop:"0.3 milj.", dialectUsers:"‚âà0.2 milj.", dialect:"Molises dialekts", info:"Mazs reƒ£ions ar vietƒìjiem dialektiem." },
    "Basilicata": { pop:"0.6 milj.", dialectUsers:"‚âà0.4 milj.", dialect:"BasilikƒÅtas dialekts", info:"Dienvidu ItƒÅlija, tradicionƒÅlie dialekti." },
    "Puglia": { pop:"4.0 milj.", dialectUsers:"‚âà2.7 milj.", dialect:"Ap≈´lijas dialekts", info:"ItƒÅlijas 'papƒìdis', spƒìcƒ´ga dienvidu ietekme." },
    "Calabria": { pop:"1.9 milj.", dialectUsers:"‚âà1.4 milj.", dialect:"Kalabrijas dialekts", info:"Dienvidu gals, ar senƒÅm grieƒ∑u saknƒìm." }
};

// ===== LOAD GEOJSON =====
fetch("https://raw.githubusercontent.com/openpolis/geojson-italy/master/geojson/limits_IT_regions.geojson")
.then(r=>r.json())
.then(data => {
    L.geoJSON(data, {
        style: { color:"#0044aa", weight:2.5, fillColor:"#89c2ff", fillOpacity:0.45 },
        onEachFeature: (feature, layer) => {
            const name = feature.properties.reg_name;
            const r = regions[name];

            layer.on("mouseover", () => layer.setStyle({ weight:4, fillOpacity:0.65 }));
            layer.on("mouseout", () => layer.setStyle({ weight:2.5, fillOpacity:0.45 }));

            layer.on("click", () => {
                if (!r) return;
                layer.bindPopup(`
                    <div class="custom-popup">
                        <h3>${name}</h3>
                        <p><b>Iedzƒ´votƒÅji:</b> ${r.pop}</p>
                        <p><b>Dialekta runƒÅtƒÅji:</b> ${r.dialectUsers}</p>
                        <p><b>Dialekts:</b> ${r.dialect}</p>
                        <p><b>Info:</b> ${r.info}</p>
                    </div>
                `).openPopup();
            });
        }
    }).addTo(map);
});

// ===== SIDE PANEL BUTTON =====
document.getElementById("dialectsBtn").onclick = () => {
    const list = document.getElementById("dialectList");
    list.innerHTML = "";

    for (const name in regions) {
        const r = regions[name];
        list.innerHTML += `
            <li>
                <b>${name}</b><br>
                Iedzƒ´votƒÅji: ${r.pop}<br>
                Dialekta runƒÅtƒÅji: ${r.dialectUsers}<br>
                <b>${r.dialect}</b> ‚Äî ${r.info}
            </li><br>
        `;
    }
    document.getElementById("sidePanel").classList.add("show");
};

// CLOSE PANEL
document.getElementById("closePanel").onclick = () => {
    document.getElementById("sidePanel").classList.remove("show");
};
</script>
</body>
</html>
