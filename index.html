<!DOCTYPE html>
<html lang="lv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Itālijas dialekti</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<style>
body {
    font-family: Arial, sans-serif;
    margin:0; padding:0;
    background:#f5f5f5;
}

/* ===== HEADER ===== */
header {
    background:#4b8bbe;
    color:white;
    text-align:center;
    padding:20px;
    position:relative;
}
h1 { margin:0; }

#dialectsBtn {
    position:absolute;
    right:20px;
    top:20px;
    padding:10px 15px;
    background:white;
    color:#4b8bbe;
    border:none;
    border-radius:5px;
    cursor:pointer;
    font-weight:bold;
    transition:0.3s;
}
#dialectsBtn:hover { background:#e0e0e0; }

/* ===== MAP ===== */
#map {
    height:80vh;
    width:95%;
    margin:20px auto;
    border-radius:10px;
    box-shadow:0 0 15px rgba(0,0,0,0.2);
}

/* ===== SIDE PANEL ===== */
#sidePanel {
    position:fixed;
    top:0;
    right:-400px;
    width:350px;
    height:100%;
    background:white;
    box-shadow:-5px 0 15px rgba(0,0,0,0.3);
    padding:20px;
    transition:0.4s ease;
    overflow-y:auto;
    z-index:999;
}
#sidePanel.show { right:0; }

#sidePanel h2 { margin-top:0; }
#closePanel {
    background:#4b8bbe;
    color:white;
    border:none;
    border-radius:5px;
    padding:10px;
    cursor:pointer;
    width:100%;
    margin-top:10px;
}

/* ===== POPUP ===== */
.custom-popup {
    font-size:14px;
    line-height:1.3;
}
.custom-popup h3 {
    margin:0 0 5px;
    color:#4b8bbe;
}

/* ===== FOOTER ===== */
footer {
    text-align:center;
    padding:15px;
    background:#222;
    color:#eee;
    font-size:0.9em;
}
footer a { color:#4b8bbe; }

/* ===== MOBILE ADAPTATION ===== */
@media screen and (max-width:768px) {
    header { padding:15px; }
    #dialectsBtn {
        position:relative;
        display:block;
        margin:10px auto 0 auto;
        font-size:14px;
        padding:8px 12px;
    }
    #map { height:60vh; width:95%; margin:15px auto; }
    #sidePanel { width:100%; right:-100%; }
    #sidePanel.show { right:0; }
}
</style>
</head>
<body>

<header>
<h1>Itālijas dialekti</h1>
<button id="dialectsBtn">Dialekti & Info</button>
</header>

<div id="map"></div>

<footer>
Dati no: 
<a href="sources.html">avoti</a> | Autors: XsaTi
</footer>

<!-- SIDE PANEL -->
<div id="sidePanel">
<h2>Dialekti un informācija</h2>
<ul id="dialectList"></ul>
<button id="closePanel">Aizvērt</button>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
/* ===== ИНИЦИАЛИЗАЦИЯ КАРТЫ ===== */
const map = L.map('map').setView([42.5, 12.5], 5);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '© OpenStreetMap'
}).addTo(map);

/* ===== ДАННЫЕ РЕГИОНОВ ===== */
const regions = {
"Piedmont": {dialect:"Pjemontes dialekts", pop:"4.36M", dialectUsers:"1.2M", info:"Ziemeļrietumu Itālija, galvenokārt Torino."},
"Lombardy": {dialect:"Lombardes dialekts", pop:"10.06M", dialectUsers:"2.8M", info:"Milāna – Itālijas finanšu un industriālais centrs."},
"Veneto": {dialect:"Venetiešu dialekts", pop:"4.85M", dialectUsers:"1.5M", info:"Venēcija, Verona, Adrijas piekraste."},
"Tuscany": {dialect:"Toskānas dialekts", pop:"3.69M", dialectUsers:"1.1M", info:"Standarta itāļu valodas pamats."},
"Lazio": {dialect:"Romas dialekts", pop:"5.87M", dialectUsers:"2M", info:"Roma – Itālijas galvaspilsēta."},
"Campania": {dialect:"Neapoles dialekts", pop:"5.63M", dialectUsers:"2.3M", info:"Neapole un Amalfi piekraste."},
"Sicily": {dialect:"Sicīliešu dialekts", pop:"4.85M", dialectUsers:"1.9M", info:"Lielākā Vidusjūras sala."},
"Sardinia": {dialect:"Sardu valoda", pop:"1.6M", dialectUsers:"0.7M", info:"Ļoti atšķirīga no itāļu valodas."},
"Friuli-Venezia Giulia": {dialect:"Furlāņu dialekts", pop:"1.2M", dialectUsers:"0.5M", info:"Austrumu pierobeža ar Slovēniju."},
"Aosta Valley": {dialect:"Valdostā dialekts", pop:"0.125M", dialectUsers:"0.05M", info:"Franču un itāļu ietekme."},
"Trentino-Alto Adige": {dialect:"Tiroļu dialekts", pop:"1.07M", dialectUsers:"0.3M", info:"Vācu un itāļu valodu maisījums."},
"Liguria": {dialect:"Ligūrijas dialekts", pop:"1.5M", dialectUsers:"0.4M", info:"Ģenova un piekraste."},
"Emilia-Romagna": {dialect:"Emīlijas dialekts", pop:"4.4M", dialectUsers:"1.2M", info:"Boloņa, Parmezāns, makaronu dzimtene."},
"Marche": {dialect:"Markes dialekts", pop:"1.5M", dialectUsers:"0.45M", info:"Adrijas piekraste, kalnains iekšzemes reģions."},
"Umbria": {dialect:"Umbrijas dialekts", pop:"0.88M", dialectUsers:"0.3M", info:"Vidus Itālija, kalnains reģions."},
"Abruzzo": {dialect:"Abrucu dialekts", pop:"1.3M", dialectUsers:"0.4M", info:"Kalnu piekraste un Parco Nazionale."},
"Molise": {dialect:"Molises dialekts", pop:"0.3M", dialectUsers:"0.1M", info:"Mazākais Itālijas reģions."},
"Basilicata": {dialect:"Basilikātas dialekts", pop:"0.54M", dialectUsers:"0.15M", info:"Dienvidu kalni, retāk apdzīvots."},
"Apulia": {dialect:"Apūlijas dialekts", pop:"4M", dialectUsers:"1.2M", info:"Itālijas 'papēdis'."},
"Calabria": {dialect:"Kalabrijas dialekts", pop:"1.9M", dialectUsers:"0.6M", info:"Dienvidu gals, kalnaina piekraste."}
};

/* ===== ЦВЕТА ===== */
function getColor() {
    const colors = ["#ff595e","#ffca3a","#8ac926","#1982c4","#6a4c93","#6a9fb5","#ff7f50"];
    return colors[Math.floor(Math.random()*colors.length)];
}

/* ===== GEOJSON ДЛЯ РЕГИОНОВ ===== */
const geoJSON = {/* твоё geoJSON с нормальными границами */};

/* ===== ДОБАВЛЕНИЕ ПОЛИГОНОВ ===== */
L.geoJSON(geoJSON, {
    style: () => ({
        color:'#0044aa',
        weight:3,
        fillColor:getColor(),
        fillOpacity:0.45,
    }),
    onEachFeature: (feature, layer) => {
        layer.on("mouseover", () => layer.setStyle({weight:5, fillOpacity:0.65}));
        layer.on("mouseout", () => layer.setStyle({weight:3, fillOpacity:0.45}));
        layer.on("click", () => {
            const n = feature.properties.name;
            const r = regions[n];
            layer.bindPopup(`
                <div class="custom-popup">
                    <h3>${n}</h3>
                    <p><b>Iedzīvotāji:</b> ${r.pop}</p>
                    <p><b>Dialekta runātāji:</b> ${r.dialectUsers}</p>
                    <p><b>Dialekts:</b> ${r.dialect}</p>
                    <p>${r.info}</p>
                </div>
            `).openPopup();
        });
    }
}).addTo(map);

/* ===== SIDE PANEL LOGIC ===== */
document.getElementById("dialectsBtn").onclick = () => {
    const list = document.getElementById("dialectList");
    list.innerHTML = "";
    for(const name in regions) {
        const r = regions[name];
        list.innerHTML += `
            <li>
                <b>${name}</b><br>
                Iedzīvotāji: ${r.pop}<br>
                Dialekta runātāji: ${r.dialectUsers}<br>
                <b>${r.dialect}</b> — ${r.info}
            </li><br>
        `;
    }
    document.getElementById("sidePanel").classList.add("show");
};

document.getElementById("closePanel").onclick = () => {
    document.getElementById("sidePanel").classList.remove("show");
};
</script>

</body>
</html>
